---
# Backend Service Account with Azure Workload Identity
apiVersion: v1
kind: ServiceAccount
metadata:
  name: eleanor-backend
  namespace: eleanor
  annotations:
    # Azure Workload Identity annotation
    azure.workload.identity/client-id: ${BACKEND_CLIENT_ID}
  labels:
    azure.workload.identity/use: "true"

---
# Celery Worker Service Account with Azure Workload Identity
apiVersion: v1
kind: ServiceAccount
metadata:
  name: eleanor-celery
  namespace: eleanor
  annotations:
    azure.workload.identity/client-id: ${CELERY_CLIENT_ID}
  labels:
    azure.workload.identity/use: "true"

---
# External Secrets Service Account (for Azure Key Vault integration)
apiVersion: v1
kind: ServiceAccount
metadata:
  name: external-secrets
  namespace: eleanor
  annotations:
    azure.workload.identity/client-id: ${EXTERNAL_SECRETS_CLIENT_ID}
  labels:
    azure.workload.identity/use: "true"
