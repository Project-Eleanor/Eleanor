---
# Backend Service Account with IRSA
apiVersion: v1
kind: ServiceAccount
metadata:
  name: eleanor-backend
  namespace: eleanor
  annotations:
    # IRSA annotation - replace with actual role ARN
    eks.amazonaws.com/role-arn: ${BACKEND_IAM_ROLE_ARN}
    eks.amazonaws.com/sts-regional-endpoints: "true"

---
# Celery Worker Service Account with IRSA
apiVersion: v1
kind: ServiceAccount
metadata:
  name: eleanor-celery
  namespace: eleanor
  annotations:
    eks.amazonaws.com/role-arn: ${CELERY_IAM_ROLE_ARN}
    eks.amazonaws.com/sts-regional-endpoints: "true"

---
# External Secrets Service Account (for AWS Secrets Manager integration)
apiVersion: v1
kind: ServiceAccount
metadata:
  name: external-secrets
  namespace: eleanor
  annotations:
    eks.amazonaws.com/role-arn: ${EXTERNAL_SECRETS_IAM_ROLE_ARN}
    eks.amazonaws.com/sts-regional-endpoints: "true"
